# CRM Автосервис

Веб-приложение для управления автосервисом, позволяющее вести учет клиентов, автомобилей и заказов на ремонт.

## Основные возможности

### Панель управления (Dashboard)
- Отображение ключевых показателей:
  - Количество автомобилей в работе
  - Количество готовых к выдаче автомобилей
  - Выручка за текущий месяц
- Список последних добавленных заказов
- Топ-5 клиентов по сумме заказов

### Рабочая область
#### Управление клиентами
- Добавление новых клиентов
- Редактирование информации о клиентах
- Удаление клиентов
- Поиск по клиентам
- Просмотр истории заказов клиента

#### Управление автомобилями
- Добавление автомобилей клиентов
- Редактирование информации об автомобилях
- Удаление автомобилей
- Поиск по автомобилям
- Просмотр истории ремонтов автомобиля

#### Управление заказами
- Создание новых заказов на ремонт
- Редактирование заказов
- Удаление заказов
- Фильтрация заказов по статусу
- Сортировка заказов по дате и стоимости
- Поиск по заказам
- Печать заказ-наряда

## Технические детали

### Структура базы данных
- Таблица `clients`:
  - id (PRIMARY KEY)
  - fio (ФИО клиента)
  - phone (Телефон)
  - email (Email, уникальный)

- Таблица `cars`:
  - id (PRIMARY KEY)
  - client_id (FOREIGN KEY -> clients.id)
  - brand (Марка)
  - model (Модель)
  - vin (VIN-код, уникальный)

- Таблица `orders`:
  - id (PRIMARY KEY)
  - car_id (FOREIGN KEY -> cars.id)
  - description (Описание работ)
  - status (Статус заказа)
  - cost (Стоимость)
  - parts (Использованные запчасти)
  - created_at (Дата создания)

### Статусы заказов
- Новый
- В работе
- Готов
- Выдан

### Функциональность
1. **Работа с базой данных**
   - Автоматическое создание таблиц при первом запуске
   - Возможность сохранения базы данных в файл
   - Возможность загрузки базы данных из файла

2. **Валидация данных**
   - Проверка обязательных полей
   - Валидация формата телефона
   - Валидация формата email
   - Проверка уникальности VIN-кода
   - Проверка уникальности email клиента

3. **Поиск и фильтрация**
   - Поиск по клиентам (ФИО, телефон, email)
   - Поиск по автомобилям (марка, модель, VIN)
   - Поиск по заказам (описание, запчасти)
   - Фильтрация заказов по статусу
   - Сортировка заказов по дате и стоимости

4. **Печать**
   - Генерация заказ-наряда для печати
   - Включение всей необходимой информации:
     - Данные клиента
     - Информация об автомобиле
     - Список выполненных работ
     - Использованные запчасти
     - Общая стоимость

### Требования
- Современный веб-браузер с поддержкой JavaScript
- Поддержка WebAssembly (для работы SQL.js)

## Использование

1. **Запуск приложения**
   - Откройте `index.html` в веб-браузере
   - При первом запуске автоматически создастся пустая база данных

2. **Сохранение данных**
   - Нажмите кнопку "Сохранить базу" для сохранения текущего состояния
   - Файл базы данных будет сохранен как `autoservice.db`

3. **Загрузка данных**
   - Нажмите кнопку "Загрузить базу"
   - Выберите ранее сохраненный файл базы данных

4. **Работа с клиентами**
   - Перейдите в раздел "Рабочая область"
   - Используйте форму для добавления нового клиента
   - Выберите клиента из списка для просмотра деталей
   - Используйте кнопки редактирования и удаления для управления

5. **Работа с автомобилями**
   - Выберите клиента
   - Используйте форму для добавления нового автомобиля
   - Выберите автомобиль из списка для просмотра деталей
   - Используйте кнопки редактирования и удаления для управления

6. **Работа с заказами**
   - Выберите автомобиль
   - Используйте форму для создания нового заказа
   - Используйте фильтры и сортировку для удобного просмотра
   - Нажмите кнопку "Печать" для генерации заказ-наряда

## Безопасность
- Все данные хранятся локально в браузере
- Нет отправки данных на сервер
- Рекомендуется регулярно сохранять базу данных

## Поддержка
При возникновении проблем:
1. Проверьте консоль браузера на наличие ошибок
2. Убедитесь, что браузер поддерживает WebAssembly
3. Попробуйте очистить кэш браузера
4. Создайте новую базу данных, если текущая повреждена 